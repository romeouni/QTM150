group_by(name, distance, air_time) %>%
summarize(dist = mean(distance, na.rm = T)) %>%
slice_max(dist, n = 10)
ATL2020 %>%
filter(carrier == "DL") %>%
group_by(dest, distance, air_time) %>%
summarize(dist = mean(distance, na.rm = T)) %>%
slice_max(dist, n = 10)
ATL2020 %>%
filter(carrier == "DL") %>%
group_by(dest, distance, air_time) %>%
summarize(dist = mean(distance, na.rm = T)) %>%
arrange(desc(dist))
ATL2020 %>%
filter(carrier == "DL") %>%
group_by(dest, distance, air_time) %>%
summarize(dist = mean(distance, na.rm = T)) %>%
arrange(desc(dist))
ATL2020 %>%
filter(carrier == "DL") %>%
group_by(distance, dest, air_time) %>%
summarize(dist = mean(distance, na.rm = T)) %>%
arrange(desc(dist))
ATL2020 %>%
filter(carrier == "DL") %>%
group_by(dest, distance, air_time) %>%
summarize(dist = mean(distance, na.rm = T)) %>%
arrange(desc(dist))
ATL2020 %>%
filter(carrier == "WN") %>%
group_by(dest) %>%
summarize(dist = mean(distance, na.rm = T)) %>%
arrange(dist) %>%
slice_min(dist, n = 10)
ATL2020 %>%
filter(carrier == "DL") %>%
group_by(dest) %>%
summarize(dist = mean(distance, na.rm = T)) %>%
arrange(desc(dist))
ATL2020 %>%
filter(carrier == "DL") %>%
group_by(dest) %>%
summarize(dist = mean(distance, na.rm = T)) %>%
arrange(desc(dist)) %>%
slice_max(dist, n = 10)
ATL2020 %>%
filter(carrier == "DL") %>%
group_by(dest, dist) %>%
summarize(dist = mean(distance, na.rm = T)) %>%
arrange(desc(dist)) %>%
slice_max(dist, n = 10)
ATL2020 %>%
filter(carrier == "DL") %>%
group_by(dest, distance) %>%
summarize(dist = mean(distance, na.rm = T)) %>%
arrange(desc(dist)) %>%
slice_max(dist, n = 10)
ATL2020 %>%
filter(carrier == "DL") %>%
group_by(dest, air_time) %>%
summarize(dist = mean(distance, na.rm = T)) %>%
arrange(desc(dist)) %>%
slice_max(dist, n = 10)
ATL_LAX_1H <- filter(ATL2020, month<=6,
dest=="LAX",
dep_time>=600 & dep_time<=1159,
arr_delay<=0)
summary(ATL_LAX_H1)
summary(ATL_LAX_1H)
sort(table(ATL_LAX_1H$carrier), decreasing = TRUE)
ATL2020 %>%
filter(carrier == "DL") %>%
group_by(dest) %>%
summarize(dist = mean(distance, na.rm = T)) %>%
arrange(desc(dist)) %>%
slice_max(dist, n = 10)
ATL2020 %>%
filter(carrier == "DL") %>%
group_by(dest) %>%
summarize(dist = mean(distance, na.rm = T)
irtime = mean(air_time, na.rm=TRUE)) %>%
ATL2020 %>%
filter(carrier == "DL") %>%
group_by(dest) %>%
summarize(dist = mean(distance, na.rm = T)
airtime = mean(air_time, na.rm=TRUE)) %>%
ATL2020 %>%
filter(carrier == "DL") %>%
group_by(dest) %>%
summarize(dist = mean(distance, na.rm = T),
airtime = mean(air_time, na.rm=TRUE)) %>%
arrange(desc(dist)) %>%
slice_max(dist, n = 10)
ATL_NYC_H1 <- ATL2020 %>%
filter(dest = "LGA" | dest = "JFK" | dest = "EWR",
ATL_NYC_H1 <- ATL2020 %>%
filter(dest == "LGA" | dest == "JFK" | dest == "EWR",
month < 7,
dep_time >= 600 & dep_time <= 1500,
arr_delay <= 0)
View(ATL_NYC_H1)
ATL_NYC_H1 %>%
group_by(carrier) %>%
summarize(airtime = mean(air_time, na.rm = T)) %>%
arrange(desc(airtime)) %>%
slice_min(airtime, n = 1)
ATL_NYC_H1 %>%
group_by(carrier) %>%
summarize(avg_airtime = mean(air_time, na.rm = T)) %>%
arrange(desc(avg_airtime)) %>%
slice_min(avg_airtime, n = 1)
ATL_NYC_H1 %>%
group_by(carrier) %>%
summarize(avg_airtime = mean(air_time, na.rm = T)) %>%
arrange(desc(avg_airtime)) %>%
mutate(hr = avg_airtime%/%60) %>%
slice_min(hr, n = 1)
ATL_NYC_H1 %>%
group_by(carrier) %>%
summarize(avg_airtime = mean(air_time, na.rm = T)) %>%
arrange(desc(avg_airtime)) %>%
slice_min(avg_airtime, n = 1)
summarize(avg_dep_delay = mean(dep_delay, na.rm = T),
avg_arr_delay = mean(arr_delay, na.rm = T),
ovr_delay = avg_dep_delay + avg_arr_delay) %>%
arrange(desc(ovr_delay))
str(ATL2020)
summarize(avg_dep_delay = mean(dep_delay, na.rm = T),
avg_arr_delay = mean(arr_delay, na.rm = T),
ovr_delay = avg_dep_delay + avg_arr_delay) %>%
arrange(desc(ovr_delay))
summarize(avg_arr_delay = mean(arr_delay, na.rm = T),
ovr_delay = avg_dep_delay + avg_arr_delay) %>%
arrange(desc(ovr_delay))
ATL2020 %>%
filter(dest == "LGA" | dest == "JFK" | dest == "EWR")
ATL2020 %>%
filter(dest == "LGA" | dest == "JFK" | dest == "EWR") %>%
group_by(carrier)
ATL2020 %>%
filter(dest == "LGA" | dest == "JFK" | dest == "EWR") %>%
group_by(carrier) %>%
summarize(avg_dep_delay = mean(dep_delay, na.rm = T),
avg_arr_delay = mean(arr_delay, na.rm = T),
ovr_delay = avg_dep_delay + avg_arr_delay) %>%
arrange(desc(ovr_delay))
ATL2020 %>%
mutate(delay_cat = case_when(
dep_delay <= 0 ~ "No Delay",
dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay >60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("1-15 Min Delay", "16-60 Min Delay", "More Than 1 Hr            Delay"))
) %>%
ggplot(aes(carrier, delay_cat)) +
geom_bar()
ATL2020 %>%
mutate(delay_cat = case_when(
dep_delay <= 0 ~ "No Delay",
dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay >60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("1-15 Min Delay", "16-60 Min Delay", "More Than 1 Hr            Delay"))
) %>%
ggplot(aes(carrier)) +
geom_bar()
ATL2020 %>%
filter(dest == "MCO") %>%
mutate(delay_cat = case_when(
dep_delay <= 0 ~ "No Delay",
dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay >60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("1-15 Min Delay", "16-60 Min Delay", "More Than 1 Hr            Delay"))
) %>%
ggplot(aes(carrier)) +
geom_bar()
ATL2020 %>%
filter(dest == "MCO") %>%
mutate(delay_cat = case_when(
dep_delay <= 0 ~ "No Delay",
dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay >60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("1-15 Min Delay", "16-60 Min Delay", "More Than 1 Hr            Delay"))
) %>%
ggplot(aes(carrier)) +
geom_bar(aes(fill = delay_cat))
sum(is.na(ATL2020$dep_delay))
ATL2020 %>%
filter(dest == "MCO") %>%
mutate(delay_cat = case_when(
dep_delay <= 0 ~ "No Delay",
dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay >60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("1-15 Min Delay", "16-60 Min Delay", "More Than 1 Hr            Delay"))
) %>%
ggplot(aes(carrier)) +
geom_bar(aes(fill = delay_cat, na.rm = T))
ATL2020 %>%
filter(dest == "MCO") %>%
mutate(delay_cat = case_when(
dep_delay <= 0 ~ "No Delay",
dep_delay = NA ~ "No Delay",
dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay > 60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("1-15 Min Delay", "16-60 Min Delay", "More Than 1 Hr            Delay"))
) %>%
ggplot(aes(carrier)) +
geom_bar(aes(fill = delay_cat))
ATL2020 %>%
filter(dest == "MCO") %>%
mutate(delay_cat = case_when(
dep_delay <= 0 ~ "No Delay",
dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay > 60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("1-15 Min Delay", "16-60 Min Delay", "More Than 1 Hr            Delay"))
) %>%
ggplot(aes(carrier)) +
geom_bar(aes(fill = delay_cat))
ATL2020 %>%
filter(dest == "MCO") %>%
mutate(delay_cat = case_when(
dep_delay <= 0 ~ "No Delay",
is.na(dep_delay) ~ "No Delay",
dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay > 60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("1-15 Min Delay", "16-60 Min Delay", "More Than 1 Hr            Delay"))
) %>%
ggplot(aes(carrier)) +
geom_bar(aes(fill = delay_cat))
ATL2020 %>%
filter(dest == "MCO") %>%
mutate(delay_cat = case_when(
#dep_delay <= 0 ~ "No Delay",
is.na(dep_delay) ~ "No Delay",
#dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
#dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay > 60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("1-15 Min Delay", "16-60 Min Delay", "More Than 1 Hr            Delay"))
) %>%
ggplot(aes(carrier)) +
geom_bar(aes(fill = delay_cat))
ATL2020 %>%
filter(dest == "MCO") %>%
mutate(delay_cat = case_when(
#dep_delay <= 0 ~ "No Delay",
is.na(dep_delay) ~ "No Delay",
#dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
#dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay > 60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("1-15 Min Delay", "16-60 Min Delay", "More Than 1 Hr            Delay"))
) %>%
ggplot(aes(carrier)) +
geom_bar()
ATL2020 %>%
filter(dest == "MCO") %>%
mutate(delay_cat = case_when(
dep_delay <= 0 ~ "No Delay",
is.na(dep_delay) ~ "No Delay",
#dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
#dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay > 60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("1-15 Min Delay", "16-60 Min Delay", "More Than 1 Hr            Delay"))
) %>%
ggplot(aes(carrier)) +
geom_bar(aes(fill = delay_cat))
ATL2020 %>%
filter(dest == "MCO") %>%
mutate(delay_cat = case_when(
dep_delay <= 0 ~ "No Delay",
is.na(dep_delay) ~ "No Delay",
dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay > 60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("1-15 Min Delay", "16-60 Min Delay", "More Than 1 Hr            Delay"))
) %>%
ggplot(aes(carrier)) +
geom_bar(aes(fill = delay_cat))
ATL2020 %>%
filter(dest == "MCO") %>%
mutate(delay_cat = case_when(
dep_delay <= 0 ~ "No Delay",
is.na(dep_delay) ~ "No Delay",
dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay > 60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("1-15 Min Delay", "16-60 Min Delay", "More Than 1 Hr            Delay"))
) %>%
ggplot(aes(carrier)) +
geom_bar() +
facet_wrap(delay_cat)
ATL2020 %>%
filter(dest == "MCO") %>%
mutate(delay_cat = case_when(
dep_delay <= 0 ~ "No Delay",
is.na(dep_delay) ~ "No Delay",
dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay > 60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("1-15 Min Delay", "16-60 Min Delay", "More Than 1 Hr            Delay"))
) %>%
ggplot(aes(carrier)) +
geom_bar() +
facet_wrap(~delay_cat)
ATL2020 %>%
filter(dest == "MCO") %>%
mutate(delay_cat = case_when(
dep_delay <= 0 ~ "No Delay",
is.na(dep_delay) ~ "No Delay",
dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay > 60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("1-15 Min Delay", "16-60 Min Delay", "More Than 1 Hr            Delay"))
)
ATL2020 %>%
filter(dest == "MCO") %>%
mutate(delay_cat = case_when(
dep_delay < 0 ~ "No Delay",
is.na(dep_delay) ~ "No Delay",
dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay > 60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("1-15 Min Delay", "16-60 Min Delay", "More Than 1 Hr            Delay"))
) %>%
ggplot(aes(carrier)) +
geom_bar() +
facet_wrap(~delay_cat)
ATL2020 %>%
filter(dest == "MCO") %>%
mutate(delay_cat = case_when(
dep_delay <= 0 ~ "No Delay",
is.na(dep_delay) ~ "No Delay",
dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay > 60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("No Delay", "1-15 Min Delay", "16-60 Min Delay",              "More Than 1 Hr Delay"))
) %>%
ggplot(aes(carrier)) +
geom_bar() +
facet_wrap(~delay_cat)
ATL2020 %>%
filter(dest == "MCO") %>%
group_by(carrier)
ATL2020 %>%
filter(dest == "MCO") %>%
group_by(carrier) %>%
summarize(carrier)
length(unique(ATL2020$carrier[ATL2020$dest == "MCO"]))
Orlando <- ATL2020 %>%
filter(dest == "MCO",
carrier != "DL") %>%
mutate(delay_cat = case_when(
dep_delay <= 0 ~ "No Delay",
is.na(dep_delay) ~ "No Delay",
dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay > 60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("No Delay", "1-15 Min Delay", "16-60 Min                      Delay",
"More Than 1 Hr Delay")))
table(Orlando)
table(Orlando, carrier)
table(Orlando, Orlando$carrier)
table(ATL2020$carrier)
table(Orlando$carrier, Orlando$delay_cat)
Orlando <- ATL2020 %>%
filter(dest == "MCO",
carrier != "DL") %>%
mutate(delay_cat = case_when(
dep_delay <= 0 ~ "No Delay",
is.na(dep_delay) ~ "No Delay",
dep_delay > 0 & dep_delay <= 15 ~ "1-15 Min Delay",
dep_delay > 15 & dep_delay <= 60 ~ "16-60 Min Delay",
dep_delay > 60 ~ "More Than 1 Hr Delay"),
delay_cat = factor(delay_cat, levels = c("No Delay", "1-15 Min Delay", "16-60 Min Delay",
"More Than 1 Hr Delay")))
table(Orlando$carrier, Orlando$delay_cat)
Orlando <- ATL2020 %>%
filter(dest == "MCO",
carrier != "DL") %>%
mutate(long_delay = case_when(
dep_delay > 60 ~ TRUE,
arr_delay > 60 ~ TRUE,
TRUE ~ FALSE
))
table(Orlando$carrier, Orlando$long_delay)
sum(ATL2020$carrier[ATL2020$dest == "BOS"])
table(ATL2020$carrier)
table(ATL2020$carrier[ATL2020$dest == "BOS"])
table(ATL2020$carrier[ATL2020$dest == "DFW"])
ATL2020 %>%
filter(dest == "DFW",
carrier == "DL" | carrier == "AA",
dep_delay <= 300,
arr_delay <= 300) %>%
ggplot(aes(dep_delay, arr_delay)) +
geom_point(color = carrier) +
geom_smooth(method = "lm")
ATL2020 %>%
filter(dest == "DFW",
carrier == "DL" | carrier == "AA",
dep_delay <= 300,
arr_delay <= 300) %>%
ggplot(aes(dep_delay, arr_delay)) +
geom_point(aes(color = carrier)) +
geom_smooth(method = "lm")
ATL2020 %>%
filter(dest == "DFW",
carrier == "DL" | carrier == "AA",
dep_delay <= 300,
arr_delay <= 300) %>%
ggplot(aes(dep_delay, arr_delay, color = carrier)) +
geom_point() +
geom_smooth(method = "lm")
```{r, output = FALSE}
library(dplyr)
library(ggplot2)
ATL2020 <- read.csv("ATL2020.csv")
ATL2020 %>%
filter(carrier == "F9") %>%
group_by(dest) %>%
summarize(del = mean(dep_delay, na.rm = T)) %>%
arrange(desc(del))
ATL2020 %>%
filter(carrier == "WN",
month <= 6) %>%
group_by(dest)
ATL_WN_FIRSTHALF <- ATL2020 %>%
filter(carrier == "WN",
month <= 6) %>%
group_by(dest)
which.max(ATL_WN_FIRSTHALF$dest)
which.max(ATL_WN_FIRSTHALF$dest, na.rm = T)
ATL2020 %>%
filter(carrier == "B6") %>%
group_by(dest) %>%
summarize(dist = mean(distance, na.rm = T)) %>%
arrange(desc(dist))
ATL2020 %>%
filter(carrier == "B6") %>%
group_by(dest) %>%
summarize(dist = mean(distance, na.rm = T),
del = mean(arr_delay, na.rm = T)) %>%
arrange(desc(dist))
ATL_WN_FIRSTHALF <- ATL2020 %>%
filter(carrier == "WN",
month <= 6) %>%
group_by(dest) %>%
summarize(dist = mean(distance, na.rm = T)) %>%
arrange(desc(dist))
ATL_WN_FIRSTHALF
which.max(ATL_WN_FIRSTHALF)
prop_table(ATL2020$carrier)
prop_tbl(ATL2020$carrier)
prop.table(ATL2020$carrier)
prop.table(ATL2020$carrier, ATL2020)
prop.table(ATL2020)
ATL_WN_FIRSTHALF <- ATL2020 %>%
filter(carrier == "WN",
month <= 6) %>%
group_by(dest) %>%
summarize(dist = mean(distance, na.rm = T)) %>%
arrange(desc(dist)) %>%
ggplot(aes(carrier)) +
geom_bar()
ATL2020 %>%
filter(carrier == "WN",
month <= 6) %>%
group_by(dest) %>%
summarize(dist = mean(distance, na.rm = T)) %>%
arrange(desc(dist)) %>%
ggplot(aes(carrier)) +
geom_bar()
babynames %>%
filter(year == 2002) %>%
group_by(sex, name) %>%
summarize(num = sum(n, na.rm = T)) %>%
arrange(desc(num)) %>%
slice_max(num, n = 5)
babynames %>%
filter(year == 2002) %>%
group_by(name) %>%
summarize(num = sum(n, na.rm = T)) %>%
arrange(desc(num)) %>%
slice_max(num, n = 5)
top5names2002 <- babynames %>%
filter(year == 2002) %>%
group_by(name) %>%
summarize(num = sum(n, na.rm = T)) %>%
arrange(desc(num)) %>%
top_n(5) %>%
select(name)
top5names2002
clas(top5names2002)
class(top5names2002)
class(as.vector(top5names2002))
babynames %>%
filter(name %in% as.vector(top5names2002)[[1]]) %>%
group_by(year, name) %>%
summarize(total = sum(n)) %>%
ggplot(aes(year, total, color=name)) + geom_line()
install.packages("nycflights13")
library(nycflights13)
library(nycflights13)
library(dplyr)
library(ggplot)
library(ggplot22)
library(ggplot2)
